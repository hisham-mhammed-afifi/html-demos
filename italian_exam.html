<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üáÆüáπ Esame di Italiano - Grade 9</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Source+Sans+3:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --terracotta: #C75B39;
            --terracotta-light: #E8866A;
            --olive: #5C7A52;
            --olive-light: #7A9E6D;
            --cream: #FFF8F0;
            --warm-white: #FFFDF9;
            --gold: #D4A853;
            --gold-light: #F0D090;
            --deep-green: #1E3A2F;
            --navy: #2C3E50;
            --sunset: #E07B54;
            --sky: #87CEEB;
            --correct: #4CAF50;
            --incorrect: #E53935;
            --shadow: rgba(44, 62, 80, 0.15);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Source Sans 3', sans-serif;
            background: linear-gradient(135deg, #FFF8F0 0%, #FFE8D6 50%, #FFDDC1 100%);
            min-height: 100vh;
            color: var(--navy);
            overflow-x: hidden;
        }

        /* Decorative Background Elements */
        .bg-decoration {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .bg-circle {
            position: absolute;
            border-radius: 50%;
            opacity: 0.1;
        }

        .bg-circle:nth-child(1) {
            width: 400px;
            height: 400px;
            background: var(--terracotta);
            top: -100px;
            right: -100px;
        }

        .bg-circle:nth-child(2) {
            width: 300px;
            height: 300px;
            background: var(--olive);
            bottom: 10%;
            left: -80px;
        }

        .bg-circle:nth-child(3) {
            width: 200px;
            height: 200px;
            background: var(--gold);
            top: 50%;
            right: 5%;
        }

        /* Main Container */
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
            position: relative;
            z-index: 1;
        }

        /* Header */
        .exam-header {
            text-align: center;
            margin-bottom: 40px;
            animation: slideDown 0.8s ease-out;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .flag-stripe {
            display: flex;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px var(--shadow);
        }

        .flag-stripe span {
            flex: 1;
        }

        .flag-green { background: var(--olive); }
        .flag-white { background: var(--warm-white); }
        .flag-red { background: var(--terracotta); }

        h1 {
            font-family: 'Playfair Display', serif;
            font-size: 2.8rem;
            color: var(--deep-green);
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.05);
        }

        .subtitle {
            font-size: 1.1rem;
            color: var(--terracotta);
            font-weight: 500;
            letter-spacing: 1px;
        }

        /* Progress Bar */
        .progress-container {
            background: var(--warm-white);
            border-radius: 20px;
            padding: 20px 25px;
            margin-bottom: 30px;
            box-shadow: 0 4px 20px var(--shadow);
            animation: fadeIn 0.8s ease-out 0.2s both;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            font-weight: 600;
        }

        .progress-section {
            color: var(--olive);
            font-size: 0.95rem;
        }

        .progress-score {
            color: var(--terracotta);
            font-size: 0.95rem;
        }

        .progress-bar {
            height: 12px;
            background: linear-gradient(90deg, #e8e0d5 0%, #f0e8dd 100%);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--olive) 0%, var(--olive-light) 50%, var(--gold) 100%);
            border-radius: 10px;
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* Section Cards */
        .section {
            background: var(--warm-white);
            border-radius: 24px;
            padding: 35px;
            margin-bottom: 25px;
            box-shadow: 0 8px 30px var(--shadow);
            border: 1px solid rgba(255,255,255,0.8);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            animation: slideUp 0.6s ease-out both;
        }

        .section:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px var(--shadow);
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(40px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section:nth-child(2) { animation-delay: 0.1s; }
        .section:nth-child(3) { animation-delay: 0.2s; }
        .section:nth-child(4) { animation-delay: 0.3s; }
        .section:nth-child(5) { animation-delay: 0.4s; }
        .section:nth-child(6) { animation-delay: 0.5s; }

        .section-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0e8dd;
        }

        .section-icon {
            width: 50px;
            height: 50px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .section-a .section-icon { background: linear-gradient(135deg, var(--olive) 0%, var(--olive-light) 100%); }
        .section-b .section-icon { background: linear-gradient(135deg, var(--terracotta) 0%, var(--terracotta-light) 100%); }
        .section-c .section-icon { background: linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 100%); }
        .section-d .section-icon { background: linear-gradient(135deg, #5B8C85 0%, #7AB5AD 100%); }
        .section-e .section-icon { background: linear-gradient(135deg, #8B5A8B 0%, #B07AB0 100%); }

        .section-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            color: var(--deep-green);
        }

        .section-marks {
            font-size: 0.85rem;
            color: var(--terracotta);
            font-weight: 600;
            background: rgba(199, 91, 57, 0.1);
            padding: 4px 12px;
            border-radius: 20px;
            margin-left: auto;
        }

        /* Reading Text Box */
        .reading-text {
            background: linear-gradient(135deg, #f8f5f0 0%, #fff8f0 100%);
            border-left: 4px solid var(--olive);
            padding: 25px;
            border-radius: 0 16px 16px 0;
            margin-bottom: 25px;
            font-size: 1.05rem;
            line-height: 1.8;
            color: var(--navy);
        }

        /* Questions */
        .question {
            margin-bottom: 20px;
            padding: 20px;
            background: #fafafa;
            border-radius: 16px;
            transition: all 0.3s ease;
        }

        .question:hover {
            background: #f5f5f5;
        }

        .question-label {
            font-weight: 600;
            color: var(--deep-green);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .question-number {
            background: var(--olive);
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85rem;
        }

        .marks-badge {
            font-size: 0.75rem;
            background: var(--gold-light);
            color: #8B6914;
            padding: 2px 8px;
            border-radius: 10px;
            margin-left: auto;
        }

        /* Input Fields */
        input[type="text"], textarea {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid #e8e0d5;
            border-radius: 12px;
            font-family: 'Source Sans 3', sans-serif;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
        }

        input[type="text"]:focus, textarea:focus {
            outline: none;
            border-color: var(--olive);
            box-shadow: 0 0 0 4px rgba(92, 122, 82, 0.15);
        }

        textarea {
            min-height: 180px;
            resize: vertical;
            line-height: 1.6;
        }

        /* Multiple Choice */
        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option {
            display: flex;
            align-items: center;
            padding: 14px 18px;
            background: white;
            border: 2px solid #e8e0d5;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .option:hover {
            border-color: var(--terracotta-light);
            background: #fff5f0;
        }

        .option.selected {
            border-color: var(--terracotta);
            background: linear-gradient(135deg, #fff5f0 0%, #ffe8e0 100%);
        }

        .option.correct {
            border-color: var(--correct);
            background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
        }

        .option.incorrect {
            border-color: var(--incorrect);
            background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);
        }

        .option input {
            display: none;
        }

        .option-letter {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #f0e8dd;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            margin-right: 14px;
            transition: all 0.3s ease;
        }

        .option.selected .option-letter {
            background: var(--terracotta);
            color: white;
        }

        .option.correct .option-letter {
            background: var(--correct);
            color: white;
        }

        .option.incorrect .option-letter {
            background: var(--incorrect);
            color: white;
        }

        /* Matching Exercise */
        .matching-container {
            display: grid;
            gap: 12px;
        }

        .matching-row {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            align-items: center;
            gap: 15px;
        }

        .matching-word {
            background: linear-gradient(135deg, #f8f5f0 0%, #fff 100%);
            padding: 14px 20px;
            border-radius: 12px;
            font-weight: 500;
            text-align: center;
            border: 2px solid #e8e0d5;
        }

        .matching-arrow {
            color: var(--gold);
            font-size: 1.5rem;
        }

        .matching-select {
            padding: 14px 18px;
            border: 2px solid #e8e0d5;
            border-radius: 12px;
            font-family: 'Source Sans 3', sans-serif;
            font-size: 1rem;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .matching-select:focus {
            outline: none;
            border-color: var(--gold);
            box-shadow: 0 0 0 4px rgba(212, 168, 83, 0.15);
        }

        /* Subsection Headers */
        .subsection-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.1rem;
            color: var(--terracotta);
            margin: 25px 0 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .subsection-title::before {
            content: '';
            width: 4px;
            height: 20px;
            background: var(--terracotta);
            border-radius: 2px;
        }

        /* Role Play Section */
        .roleplay-scenario {
            background: linear-gradient(135deg, #f0e6f0 0%, #fff0ff 100%);
            border-left: 4px solid #8B5A8B;
            padding: 20px;
            border-radius: 0 16px 16px 0;
            margin-bottom: 20px;
        }

        .roleplay-scenario h4 {
            color: #8B5A8B;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Buttons */
        .btn {
            padding: 16px 40px;
            border: none;
            border-radius: 14px;
            font-family: 'Source Sans 3', sans-serif;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--terracotta) 0%, var(--terracotta-light) 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(199, 91, 57, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(199, 91, 57, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, var(--olive) 0%, var(--olive-light) 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(92, 122, 82, 0.3);
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(92, 122, 82, 0.4);
        }

        .submit-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 40px;
            flex-wrap: wrap;
        }

        /* Results Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(30, 58, 47, 0.8);
            backdrop-filter: blur(8px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
        }

        .modal-overlay.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        .modal {
            background: var(--warm-white);
            border-radius: 28px;
            padding: 45px;
            max-width: 500px;
            width: 100%;
            text-align: center;
            box-shadow: 0 25px 80px rgba(0,0,0,0.3);
            animation: modalSlide 0.4s ease-out;
        }

        @keyframes modalSlide {
            from {
                opacity: 0;
                transform: scale(0.9) translateY(20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .result-emoji {
            font-size: 5rem;
            margin-bottom: 20px;
            animation: bounce 0.6s ease infinite alternate;
        }

        @keyframes bounce {
            from { transform: translateY(0); }
            to { transform: translateY(-10px); }
        }

        .result-title {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            color: var(--deep-green);
            margin-bottom: 15px;
        }

        .result-score {
            font-size: 3.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--terracotta) 0%, var(--gold) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .result-message {
            color: #666;
            font-size: 1.1rem;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        /* Feedback Messages */
        .feedback {
            padding: 10px 15px;
            border-radius: 10px;
            margin-top: 10px;
            font-size: 0.9rem;
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .feedback.correct {
            display: block;
            background: #e8f5e9;
            color: #2e7d32;
            border: 1px solid #a5d6a7;
        }

        .feedback.incorrect {
            display: block;
            background: #ffebee;
            color: #c62828;
            border: 1px solid #ef9a9a;
        }

        /* Timer */
        .timer {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--warm-white);
            padding: 12px 24px;
            border-radius: 50px;
            box-shadow: 0 4px 20px var(--shadow);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 100;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .timer-icon {
            font-size: 1.2rem;
        }

        .timer-display {
            color: var(--terracotta);
            font-size: 1.1rem;
        }

        /* Confetti Canvas */
        #confetti-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1001;
        }

        /* Responsive */
        @media (max-width: 768px) {
            h1 { font-size: 2rem; }
            .section { padding: 25px 20px; }
            .modal { padding: 30px 25px; }
            .result-score { font-size: 2.5rem; }
            .timer {
                top: auto;
                bottom: 20px;
                right: 20px;
            }
            .matching-row {
                grid-template-columns: 1fr;
                gap: 8px;
            }
            .matching-arrow {
                transform: rotate(90deg);
                justify-self: center;
            }
        }

        /* Print Styles */
        @media print {
            .timer, .submit-container, .progress-container { display: none; }
            .section { break-inside: avoid; }
        }
    </style>
</head>
<body>
    <div class="bg-decoration">
        <div class="bg-circle"></div>
        <div class="bg-circle"></div>
        <div class="bg-circle"></div>
    </div>

    <div class="timer">
        <span class="timer-icon">‚è±Ô∏è</span>
        <span class="timer-display" id="timer">02:00:00</span>
    </div>

    <div class="container">
        <header class="exam-header">
            <div class="flag-stripe">
                <span class="flag-green"></span>
                <span class="flag-white"></span>
                <span class="flag-red"></span>
            </div>
            <h1>üáÆüáπ Esame di Italiano</h1>
            <p class="subtitle">Grade 9 ‚Ä¢ Interactive Edition</p>
        </header>

        <div class="progress-container">
            <div class="progress-info">
                <span class="progress-section">Sezione <span id="current-section">1</span> di 5</span>
                <span class="progress-score">Punti: <span id="current-score">0</span> / 60</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
            </div>
        </div>

        <!-- Section A: Reading Comprehension -->
        <div class="section section-a">
            <div class="section-header">
                <div class="section-icon">üìñ</div>
                <h2 class="section-title">Section A ‚Äì Reading Comprehension</h2>
                <span class="section-marks">15 Marks</span>
            </div>

            <div class="reading-text">
                <p>Marco ha quindici anni e vive al Cairo. Ogni mattina si sveglia alle sei e mezza per andare a scuola. La sua materia preferita √® l'italiano perch√© gli piace imparare nuove lingue e conoscere culture diverse. Dopo la scuola, Marco fa i compiti e poi gioca a calcio con i suoi amici. Nel fine settimana, aiuta la sua famiglia e guarda film italiani.</p>
            </div>

            <div class="question" data-section="a" data-question="1" data-answer="quindici" data-marks="2">
                <div class="question-label">
                    <span class="question-number">1</span>
                    Quanti anni ha Marco?
                    <span class="marks-badge">2 marks</span>
                </div>
                <input type="text" placeholder="Scrivi la tua risposta..." id="a1">
                <div class="feedback" id="feedback-a1"></div>
            </div>

            <div class="question" data-section="a" data-question="2" data-answer="cairo" data-marks="2">
                <div class="question-label">
                    <span class="question-number">2</span>
                    Dove vive Marco?
                    <span class="marks-badge">2 marks</span>
                </div>
                <input type="text" placeholder="Scrivi la tua risposta..." id="a2">
                <div class="feedback" id="feedback-a2"></div>
            </div>

            <div class="question" data-section="a" data-question="3" data-answer="italiano" data-marks="4">
                <div class="question-label">
                    <span class="question-number">3</span>
                    Qual √® la sua materia preferita? Perch√©?
                    <span class="marks-badge">4 marks</span>
                </div>
                <textarea placeholder="Scrivi la tua risposta completa..." id="a3"></textarea>
                <div class="feedback" id="feedback-a3"></div>
            </div>

            <div class="question" data-section="a" data-question="4" data-answer="compiti,calcio" data-marks="4">
                <div class="question-label">
                    <span class="question-number">4</span>
                    Cosa fa Marco dopo la scuola?
                    <span class="marks-badge">4 marks</span>
                </div>
                <textarea placeholder="Scrivi la tua risposta completa..." id="a4"></textarea>
                <div class="feedback" id="feedback-a4"></div>
            </div>

            <div class="question" data-section="a" data-question="5" data-answer="s√¨" data-marks="3">
                <div class="question-label">
                    <span class="question-number">5</span>
                    Marco guarda film nel fine settimana?
                    <span class="marks-badge">3 marks</span>
                </div>
                <input type="text" placeholder="Scrivi la tua risposta..." id="a5">
                <div class="feedback" id="feedback-a5"></div>
            </div>
        </div>

        <!-- Section B: Grammar & Language Use -->
        <div class="section section-b">
            <div class="section-header">
                <div class="section-icon">‚úèÔ∏è</div>
                <h2 class="section-title">Section B ‚Äì Grammar & Language Use</h2>
                <span class="section-marks">15 Marks</span>
            </div>

            <h3 class="subsection-title">A) Scegli la risposta corretta (6 Marks)</h3>

            <div class="question" data-section="b" data-question="1" data-answer="b" data-marks="2">
                <div class="question-label">
                    <span class="question-number">1</span>
                    Marco ___ a scuola ogni mattina.
                    <span class="marks-badge">2 marks</span>
                </div>
                <div class="options">
                    <label class="option" data-value="a">
                        <input type="radio" name="b1" value="a">
                        <span class="option-letter">a</span>
                        vanno
                    </label>
                    <label class="option" data-value="b">
                        <input type="radio" name="b1" value="b">
                        <span class="option-letter">b</span>
                        va
                    </label>
                    <label class="option" data-value="c">
                        <input type="radio" name="b1" value="c">
                        <span class="option-letter">c</span>
                        vai
                    </label>
                </div>
                <div class="feedback" id="feedback-b1"></div>
            </div>

            <div class="question" data-section="b" data-question="2" data-answer="b" data-marks="2">
                <div class="question-label">
                    <span class="question-number">2</span>
                    Noi ___ i compiti nel pomeriggio.
                    <span class="marks-badge">2 marks</span>
                </div>
                <div class="options">
                    <label class="option" data-value="a">
                        <input type="radio" name="b2" value="a">
                        <span class="option-letter">a</span>
                        fa
                    </label>
                    <label class="option" data-value="b">
                        <input type="radio" name="b2" value="b">
                        <span class="option-letter">b</span>
                        facciamo
                    </label>
                    <label class="option" data-value="c">
                        <input type="radio" name="b2" value="c">
                        <span class="option-letter">c</span>
                        fanno
                    </label>
                </div>
                <div class="feedback" id="feedback-b2"></div>
            </div>

            <div class="question" data-section="b" data-question="3" data-answer="a" data-marks="2">
                <div class="question-label">
                    <span class="question-number">3</span>
                    Io ___ calcio con i miei amici.
                    <span class="marks-badge">2 marks</span>
                </div>
                <div class="options">
                    <label class="option" data-value="a">
                        <input type="radio" name="b3" value="a">
                        <span class="option-letter">a</span>
                        gioco
                    </label>
                    <label class="option" data-value="b">
                        <input type="radio" name="b3" value="b">
                        <span class="option-letter">b</span>
                        gioca
                    </label>
                    <label class="option" data-value="c">
                        <input type="radio" name="b3" value="c">
                        <span class="option-letter">c</span>
                        giochiamo
                    </label>
                </div>
                <div class="feedback" id="feedback-b3"></div>
            </div>

            <h3 class="subsection-title">B) Completa con il verbo corretto al presente (6 Marks)</h3>

            <div class="question" data-section="b" data-question="4" data-answer="studio" data-marks="2">
                <div class="question-label">
                    <span class="question-number">4</span>
                    Io ______ (studiare) italiano.
                    <span class="marks-badge">2 marks</span>
                </div>
                <input type="text" placeholder="Scrivi il verbo coniugato..." id="b4">
                <div class="feedback" id="feedback-b4"></div>
            </div>

            <div class="question" data-section="b" data-question="5" data-answer="abitiamo" data-marks="2">
                <div class="question-label">
                    <span class="question-number">5</span>
                    Noi ______ (abitare) al Cairo.
                    <span class="marks-badge">2 marks</span>
                </div>
                <input type="text" placeholder="Scrivi il verbo coniugato..." id="b5">
                <div class="feedback" id="feedback-b5"></div>
            </div>

            <div class="question" data-section="b" data-question="6" data-answer="guarda" data-marks="2">
                <div class="question-label">
                    <span class="question-number">6</span>
                    Marco ______ (guardare) la TV.
                    <span class="marks-badge">2 marks</span>
                </div>
                <input type="text" placeholder="Scrivi il verbo coniugato..." id="b6">
                <div class="feedback" id="feedback-b6"></div>
            </div>

            <h3 class="subsection-title">C) Trasforma al plurale (3 Marks)</h3>

            <div class="question" data-section="b" data-question="7" data-answer="i ragazzi" data-marks="1.5">
                <div class="question-label">
                    <span class="question-number">7</span>
                    Il ragazzo ‚Üí __________
                    <span class="marks-badge">1.5 marks</span>
                </div>
                <input type="text" placeholder="Scrivi la forma plurale..." id="b7">
                <div class="feedback" id="feedback-b7"></div>
            </div>

            <div class="question" data-section="b" data-question="8" data-answer="le materie" data-marks="1.5">
                <div class="question-label">
                    <span class="question-number">8</span>
                    La materia ‚Üí __________
                    <span class="marks-badge">1.5 marks</span>
                </div>
                <input type="text" placeholder="Scrivi la forma plurale..." id="b8">
                <div class="feedback" id="feedback-b8"></div>
            </div>
        </div>

        <!-- Section C: Vocabulary -->
        <div class="section section-c">
            <div class="section-header">
                <div class="section-icon">üìö</div>
                <h2 class="section-title">Section C ‚Äì Vocabulary</h2>
                <span class="section-marks">10 Marks</span>
            </div>

            <h3 class="subsection-title">A) Abbina la parola alla categoria corretta (5 Marks)</h3>

            <div class="matching-container">
                <div class="matching-row">
                    <div class="matching-word">Scuola</div>
                    <span class="matching-arrow">‚Üí</span>
                    <select class="matching-select" id="c1" data-answer="luogo">
                        <option value="">Scegli...</option>
                        <option value="luogo">Luogo</option>
                        <option value="verbo">Verbo</option>
                        <option value="persona">Persona</option>
                        <option value="oggetto">Oggetto</option>
                    </select>
                </div>

                <div class="matching-row">
                    <div class="matching-word">Studiare</div>
                    <span class="matching-arrow">‚Üí</span>
                    <select class="matching-select" id="c2" data-answer="verbo">
                        <option value="">Scegli...</option>
                        <option value="luogo">Luogo</option>
                        <option value="verbo">Verbo</option>
                        <option value="persona">Persona</option>
                        <option value="oggetto">Oggetto</option>
                    </select>
                </div>

                <div class="matching-row">
                    <div class="matching-word">Amico</div>
                    <span class="matching-arrow">‚Üí</span>
                    <select class="matching-select" id="c3" data-answer="persona">
                        <option value="">Scegli...</option>
                        <option value="luogo">Luogo</option>
                        <option value="verbo">Verbo</option>
                        <option value="persona">Persona</option>
                        <option value="oggetto">Oggetto</option>
                    </select>
                </div>

                <div class="matching-row">
                    <div class="matching-word">Film</div>
                    <span class="matching-arrow">‚Üí</span>
                    <select class="matching-select" id="c4" data-answer="oggetto">
                        <option value="">Scegli...</option>
                        <option value="luogo">Luogo</option>
                        <option value="verbo">Verbo</option>
                        <option value="persona">Persona</option>
                        <option value="oggetto">Oggetto</option>
                    </select>
                </div>

                <div class="matching-row">
                    <div class="matching-word">Correre</div>
                    <span class="matching-arrow">‚Üí</span>
                    <select class="matching-select" id="c5" data-answer="verbo">
                        <option value="">Scegli...</option>
                        <option value="luogo">Luogo</option>
                        <option value="verbo">Verbo</option>
                        <option value="persona">Persona</option>
                        <option value="oggetto">Oggetto</option>
                    </select>
                </div>
            </div>

            <h3 class="subsection-title">B) Scrivi il significato in italiano (5 Marks)</h3>

            <div class="question" data-section="c" data-question="6" data-marks="2.5">
                <div class="question-label">
                    <span class="question-number">6</span>
                    Scuola - Descrivi cos'√®:
                    <span class="marks-badge">2.5 marks</span>
                </div>
                <input type="text" placeholder="Scrivi la definizione..." id="c6">
                <div class="feedback" id="feedback-c6"></div>
            </div>

            <div class="question" data-section="c" data-question="7" data-marks="2.5">
                <div class="question-label">
                    <span class="question-number">7</span>
                    Amico - Descrivi cos'√®:
                    <span class="marks-badge">2.5 marks</span>
                </div>
                <input type="text" placeholder="Scrivi la definizione..." id="c7">
                <div class="feedback" id="feedback-c7"></div>
            </div>
        </div>

        <!-- Section D: Writing -->
        <div class="section section-d">
            <div class="section-header">
                <div class="section-icon">‚úçÔ∏è</div>
                <h2 class="section-title">Section D ‚Äì Writing</h2>
                <span class="section-marks">10 Marks</span>
            </div>

            <div class="question">
                <div class="question-label">
                    <span class="question-number">üìù</span>
                    Scrivi un paragrafo (6‚Äì8 frasi) su uno dei seguenti temi:
                    <span class="marks-badge">10 marks</span>
                </div>
                
                <div style="margin-bottom: 15px; padding: 15px; background: #f5f5f5; border-radius: 12px;">
                    <p style="margin-bottom: 10px; font-weight: 500;">Scegli un tema:</p>
                    <label style="display: block; margin: 8px 0; cursor: pointer;">
                        <input type="radio" name="writing-topic" value="giornata" style="margin-right: 8px;"> La tua giornata a scuola
                    </label>
                    <label style="display: block; margin: 8px 0; cursor: pointer;">
                        <input type="radio" name="writing-topic" value="tempo" style="margin-right: 8px;"> Il tuo tempo libero
                    </label>
                    <label style="display: block; margin: 8px 0; cursor: pointer;">
                        <input type="radio" name="writing-topic" value="materia" style="margin-right: 8px;"> La tua materia preferita
                    </label>
                </div>

                <textarea id="d1" placeholder="Scrivi qui il tuo paragrafo... (Usa: verbi al presente, vocabolario corretto e frasi complete)"></textarea>
                
                <div style="margin-top: 10px; font-size: 0.9rem; color: #888;">
                    Conteggio parole: <span id="word-count">0</span> | Conteggio frasi: <span id="sentence-count">0</span>
                </div>
                <div class="feedback" id="feedback-d1"></div>
            </div>
        </div>

        <!-- Section E: Interactive Situation -->
        <div class="section section-e">
            <div class="section-header">
                <div class="section-icon">üé≠</div>
                <h2 class="section-title">Section E ‚Äì Interactive Situation (Role Play)</h2>
                <span class="section-marks">10 Marks</span>
            </div>

            <div class="roleplay-scenario">
                <h4>üé¨ Situazione:</h4>
                <p>Tu sei uno studente italiano. Un tuo amico ti chiede informazioni sulla tua scuola.</p>
            </div>

            <div class="question" data-section="e" data-question="1" data-marks="2.5">
                <div class="question-label">
                    <span class="question-number">1</span>
                    Come si chiama la tua scuola?
                    <span class="marks-badge">2.5 marks</span>
                </div>
                <input type="text" placeholder="Rispondi in italiano..." id="e1">
                <div class="feedback" id="feedback-e1"></div>
            </div>

            <div class="question" data-section="e" data-question="2" data-marks="2.5">
                <div class="question-label">
                    <span class="question-number">2</span>
                    A che ora inizia la scuola?
                    <span class="marks-badge">2.5 marks</span>
                </div>
                <input type="text" placeholder="Rispondi in italiano..." id="e2">
                <div class="feedback" id="feedback-e2"></div>
            </div>

            <div class="question" data-section="e" data-question="3" data-marks="2.5">
                <div class="question-label">
                    <span class="question-number">3</span>
                    Qual √® la tua materia preferita?
                    <span class="marks-badge">2.5 marks</span>
                </div>
                <input type="text" placeholder="Rispondi in italiano..." id="e3">
                <div class="feedback" id="feedback-e3"></div>
            </div>

            <div class="question" data-section="e" data-question="4" data-marks="2.5">
                <div class="question-label">
                    <span class="question-number">4</span>
                    Cosa fai dopo la scuola?
                    <span class="marks-badge">2.5 marks</span>
                </div>
                <input type="text" placeholder="Rispondi in italiano..." id="e4">
                <div class="feedback" id="feedback-e4"></div>
            </div>
        </div>

        <div class="submit-container">
            <button class="btn btn-secondary" onclick="saveProgress()">
                üíæ Salva Progresso
            </button>
            <button class="btn btn-primary" onclick="submitExam()">
                üöÄ Consegna Esame
            </button>
        </div>

        <footer style="text-align: center; margin-top: 40px; padding: 20px; color: #888; font-size: 0.9rem;">
            <p>üáÆüáπ Esame di Italiano - Grade 9 Interactive Edition</p>
            <p>Buona fortuna! üçÄ</p>
        </footer>
    </div>

    <!-- Results Modal -->
    <div class="modal-overlay" id="results-modal">
        <div class="modal">
            <div class="result-emoji" id="result-emoji">üéâ</div>
            <h2 class="result-title" id="result-title">Complimenti!</h2>
            <div class="result-score" id="result-score">45/60</div>
            <p class="result-message" id="result-message">Hai completato l'esame con successo!</p>
            <button class="btn btn-primary" onclick="closeModal()">
                ‚ú® Rivedi le Risposte
            </button>
        </div>
    </div>

    <!-- Confetti Canvas -->
    <canvas id="confetti-canvas"></canvas>

    <script>
        // Timer functionality
        let timeRemaining = 2 * 60 * 60; // 2 hours in seconds
        let timerInterval;

        function startTimer() {
            timerInterval = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    submitExam();
                }
                
                // Warning at 10 minutes
                if (timeRemaining === 600) {
                    alert('‚ö†Ô∏è Attenzione! Hai solo 10 minuti rimanenti!');
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const hours = Math.floor(timeRemaining / 3600);
            const minutes = Math.floor((timeRemaining % 3600) / 60);
            const seconds = timeRemaining % 60;
            
            document.getElementById('timer').textContent = 
                `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            
            // Change color when time is low
            const timerEl = document.querySelector('.timer');
            if (timeRemaining < 600) {
                timerEl.style.background = '#ffebee';
                timerEl.style.color = '#c62828';
            }
        }

        // Multiple choice selection
        document.querySelectorAll('.option').forEach(option => {
            option.addEventListener('click', function() {
                const parent = this.closest('.question');
                parent.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
                this.querySelector('input').checked = true;
                updateProgress();
            });
        });

        // Word count for writing section
        document.getElementById('d1').addEventListener('input', function() {
            const text = this.value.trim();
            const words = text ? text.split(/\s+/).length : 0;
            const sentences = text ? text.split(/[.!?]+/).filter(s => s.trim()).length : 0;
            
            document.getElementById('word-count').textContent = words;
            document.getElementById('sentence-count').textContent = sentences;
            updateProgress();
        });

        // Input change listeners
        document.querySelectorAll('input[type="text"], textarea, select').forEach(input => {
            input.addEventListener('input', updateProgress);
        });

        // Progress tracking
        function updateProgress() {
            let answered = 0;
            const total = 22; // Total questions
            
            // Text inputs
            document.querySelectorAll('input[type="text"]').forEach(input => {
                if (input.value.trim()) answered++;
            });
            
            // Textareas
            document.querySelectorAll('textarea').forEach(textarea => {
                if (textarea.value.trim()) answered++;
            });
            
            // Radio buttons
            document.querySelectorAll('.question').forEach(q => {
                if (q.querySelector('input[type="radio"]:checked')) answered++;
            });
            
            // Selects
            document.querySelectorAll('select').forEach(select => {
                if (select.value) answered++;
            });
            
            const progress = (answered / total) * 100;
            document.getElementById('progress-fill').style.width = `${progress}%`;
            
            // Update section indicator
            const section = Math.min(5, Math.floor(answered / 4.4) + 1);
            document.getElementById('current-section').textContent = section;
        }

        // Save progress to localStorage
        function saveProgress() {
            const answers = {};
            
            document.querySelectorAll('input[type="text"], textarea').forEach(input => {
                answers[input.id] = input.value;
            });
            
            document.querySelectorAll('input[type="radio"]:checked').forEach(radio => {
                answers[radio.name] = radio.value;
            });
            
            document.querySelectorAll('select').forEach(select => {
                answers[select.id] = select.value;
            });
            
            localStorage.setItem('italianExamProgress', JSON.stringify(answers));
            localStorage.setItem('italianExamTime', timeRemaining);
            
            // Show save confirmation
            const btn = event.target;
            const originalText = btn.innerHTML;
            btn.innerHTML = '‚úÖ Salvato!';
            btn.style.background = 'linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%)';
            
            setTimeout(() => {
                btn.innerHTML = originalText;
                btn.style.background = '';
            }, 2000);
        }

        // Load saved progress
        function loadProgress() {
            const saved = localStorage.getItem('italianExamProgress');
            const savedTime = localStorage.getItem('italianExamTime');
            
            if (saved) {
                const answers = JSON.parse(saved);
                
                Object.keys(answers).forEach(key => {
                    const element = document.getElementById(key);
                    if (element) {
                        if (element.type === 'radio') {
                            document.querySelector(`input[name="${key}"][value="${answers[key]}"]`).checked = true;
                            document.querySelector(`input[name="${key}"][value="${answers[key]}"]`).closest('.option').classList.add('selected');
                        } else {
                            element.value = answers[key];
                        }
                    } else {
                        // For radio buttons stored by name
                        const radio = document.querySelector(`input[name="${key}"][value="${answers[key]}"]`);
                        if (radio) {
                            radio.checked = true;
                            radio.closest('.option').classList.add('selected');
                        }
                    }
                });
                
                updateProgress();
            }
            
            if (savedTime) {
                timeRemaining = parseInt(savedTime);
            }
        }

        // Submit exam and calculate score
        function submitExam() {
            clearInterval(timerInterval);
            
            let score = 0;
            let totalPossible = 60;
            
            // Section A - Reading Comprehension (flexible checking)
            const readingAnswers = {
                'a1': { keywords: ['quindici', '15'], marks: 2 },
                'a2': { keywords: ['cairo'], marks: 2 },
                'a3': { keywords: ['italiano', 'lingue', 'culture'], marks: 4 },
                'a4': { keywords: ['compiti', 'calcio'], marks: 4 },
                'a5': { keywords: ['s√¨', 'si', 'yes'], marks: 3 }
            };
            
            Object.keys(readingAnswers).forEach(id => {
                const input = document.getElementById(id);
                const answer = input.value.toLowerCase().trim();
                const config = readingAnswers[id];
                const feedback = document.getElementById(`feedback-${id}`);
                
                const matchCount = config.keywords.filter(kw => answer.includes(kw)).length;
                
                if (matchCount > 0) {
                    score += config.marks;
                    feedback.textContent = `‚úì Corretto! +${config.marks} punti`;
                    feedback.className = 'feedback correct';
                } else if (answer) {
                    feedback.textContent = `‚úó Risposta incompleta. Parole chiave: ${config.keywords.join(', ')}`;
                    feedback.className = 'feedback incorrect';
                }
            });
            
            // Section B - Multiple Choice
            const mcAnswers = { 'b1': 'b', 'b2': 'b', 'b3': 'a' };
            
            Object.keys(mcAnswers).forEach(name => {
                const selected = document.querySelector(`input[name="${name}"]:checked`);
                const options = document.querySelectorAll(`input[name="${name}"]`);
                const feedback = document.getElementById(`feedback-${name}`);
                
                options.forEach(opt => {
                    const parent = opt.closest('.option');
                    if (opt.value === mcAnswers[name]) {
                        parent.classList.add('correct');
                    } else if (selected && opt.value === selected.value) {
                        parent.classList.add('incorrect');
                    }
                });
                
                if (selected && selected.value === mcAnswers[name]) {
                    score += 2;
                    feedback.textContent = '‚úì Corretto! +2 punti';
                    feedback.className = 'feedback correct';
                } else {
                    feedback.textContent = `‚úó La risposta corretta √®: ${mcAnswers[name]}`;
                    feedback.className = 'feedback incorrect';
                }
            });
            
            // Section B - Verb conjugation
            const verbAnswers = {
                'b4': { answer: 'studio', marks: 2 },
                'b5': { answer: 'abitiamo', marks: 2 },
                'b6': { answer: 'guarda', marks: 2 }
            };
            
            Object.keys(verbAnswers).forEach(id => {
                const input = document.getElementById(id);
                const answer = input.value.toLowerCase().trim();
                const config = verbAnswers[id];
                const feedback = document.getElementById(`feedback-${id}`);
                
                if (answer === config.answer) {
                    score += config.marks;
                    feedback.textContent = `‚úì Corretto! +${config.marks} punti`;
                    feedback.className = 'feedback correct';
                } else {
                    feedback.textContent = `‚úó La risposta corretta √®: ${config.answer}`;
                    feedback.className = 'feedback incorrect';
                }
            });
            
            // Section B - Plural forms
            const pluralAnswers = {
                'b7': { answer: 'i ragazzi', marks: 1.5 },
                'b8': { answer: 'le materie', marks: 1.5 }
            };
            
            Object.keys(pluralAnswers).forEach(id => {
                const input = document.getElementById(id);
                const answer = input.value.toLowerCase().trim();
                const config = pluralAnswers[id];
                const feedback = document.getElementById(`feedback-${id}`);
                
                if (answer === config.answer) {
                    score += config.marks;
                    feedback.textContent = `‚úì Corretto! +${config.marks} punti`;
                    feedback.className = 'feedback correct';
                } else {
                    feedback.textContent = `‚úó La risposta corretta √®: ${config.answer}`;
                    feedback.className = 'feedback incorrect';
                }
            });
            
            // Section C - Matching
            const matchingAnswers = {
                'c1': 'luogo',
                'c2': 'verbo',
                'c3': 'persona',
                'c4': 'oggetto',
                'c5': 'verbo'
            };
            
            Object.keys(matchingAnswers).forEach(id => {
                const select = document.getElementById(id);
                const answer = select.value.toLowerCase();
                
                if (answer === matchingAnswers[id]) {
                    score += 1;
                    select.style.borderColor = 'var(--correct)';
                    select.style.background = '#e8f5e9';
                } else {
                    select.style.borderColor = 'var(--incorrect)';
                    select.style.background = '#ffebee';
                }
            });
            
            // Section C - Definitions (flexible checking)
            ['c6', 'c7'].forEach(id => {
                const input = document.getElementById(id);
                const answer = input.value.trim();
                const feedback = document.getElementById(`feedback-${id}`);
                
                if (answer.length > 10) {
                    score += 2.5;
                    feedback.textContent = '‚úì Risposta accettata! +2.5 punti';
                    feedback.className = 'feedback correct';
                } else if (answer) {
                    score += 1;
                    feedback.textContent = '‚ñ≥ Risposta parziale. +1 punto';
                    feedback.className = 'feedback incorrect';
                }
            });
            
            // Section D - Writing (based on length and quality)
            const writing = document.getElementById('d1').value.trim();
            const writingFeedback = document.getElementById('feedback-d1');
            const wordCount = writing ? writing.split(/\s+/).length : 0;
            const sentenceCount = writing ? writing.split(/[.!?]+/).filter(s => s.trim()).length : 0;
            
            if (sentenceCount >= 6 && wordCount >= 40) {
                score += 10;
                writingFeedback.textContent = '‚úì Eccellente! Paragrafo completo. +10 punti';
                writingFeedback.className = 'feedback correct';
            } else if (sentenceCount >= 4 && wordCount >= 25) {
                score += 7;
                writingFeedback.textContent = '‚ñ≥ Buono! Paragrafo accettabile. +7 punti';
                writingFeedback.className = 'feedback correct';
            } else if (sentenceCount >= 2 && wordCount >= 15) {
                score += 4;
                writingFeedback.textContent = '‚ñ≥ Sufficiente. Prova a scrivere di pi√π. +4 punti';
                writingFeedback.className = 'feedback incorrect';
            } else if (writing) {
                score += 2;
                writingFeedback.textContent = '‚úó Troppo breve. Servono 6-8 frasi. +2 punti';
                writingFeedback.className = 'feedback incorrect';
            }
            
            // Section E - Role Play (based on response quality)
            ['e1', 'e2', 'e3', 'e4'].forEach(id => {
                const input = document.getElementById(id);
                const answer = input.value.trim();
                const feedback = document.getElementById(`feedback-${id}`);
                
                if (answer.length > 5) {
                    score += 2.5;
                    feedback.textContent = '‚úì Risposta accettata! +2.5 punti';
                    feedback.className = 'feedback correct';
                } else if (answer) {
                    score += 1;
                    feedback.textContent = '‚ñ≥ Risposta troppo breve. +1 punto';
                    feedback.className = 'feedback incorrect';
                }
            });
            
            // Update score display
            document.getElementById('current-score').textContent = Math.round(score);
            
            // Show results modal
            showResults(score, totalPossible);
        }

        function showResults(score, total) {
            const modal = document.getElementById('results-modal');
            const emoji = document.getElementById('result-emoji');
            const title = document.getElementById('result-title');
            const scoreDisplay = document.getElementById('result-score');
            const message = document.getElementById('result-message');
            
            const percentage = (score / total) * 100;
            
            scoreDisplay.textContent = `${Math.round(score)}/${total}`;
            
            if (percentage >= 90) {
                emoji.textContent = 'üèÜ';
                title.textContent = 'Eccezionale!';
                message.textContent = 'Sei un vero maestro dell\'italiano! Complimenti!';
                launchConfetti();
            } else if (percentage >= 75) {
                emoji.textContent = 'üéâ';
                title.textContent = 'Ottimo Lavoro!';
                message.textContent = 'Hai dimostrato un\'ottima conoscenza dell\'italiano!';
                launchConfetti();
            } else if (percentage >= 60) {
                emoji.textContent = 'üëè';
                title.textContent = 'Bene!';
                message.textContent = 'Buon risultato! Continua a studiare!';
            } else if (percentage >= 40) {
                emoji.textContent = 'üìö';
                title.textContent = 'Sufficiente';
                message.textContent = 'Hai bisogno di pi√π pratica. Non arrenderti!';
            } else {
                emoji.textContent = 'üí™';
                title.textContent = 'Continua a Studiare';
                message.textContent = 'Non preoccuparti! La pratica rende perfetti!';
            }
            
            modal.classList.add('active');
        }

        function closeModal() {
            document.getElementById('results-modal').classList.remove('active');
            
            // Scroll to top to review answers
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Confetti animation
        function launchConfetti() {
            const canvas = document.getElementById('confetti-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            const confetti = [];
            const colors = ['#C75B39', '#5C7A52', '#D4A853', '#E07B54', '#87CEEB', '#fff'];
            
            for (let i = 0; i < 150; i++) {
                confetti.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height - canvas.height,
                    r: Math.random() * 6 + 4,
                    d: Math.random() * 150,
                    color: colors[Math.floor(Math.random() * colors.length)],
                    tilt: Math.floor(Math.random() * 10) - 10,
                    tiltAngle: 0,
                    tiltAngleIncrement: Math.random() * 0.07 + 0.05
                });
            }
            
            function draw() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                confetti.forEach((c, i) => {
                    ctx.beginPath();
                    ctx.lineWidth = c.r / 2;
                    ctx.strokeStyle = c.color;
                    ctx.moveTo(c.x + c.tilt + c.r / 4, c.y);
                    ctx.lineTo(c.x + c.tilt, c.y + c.tilt + c.r / 4);
                    ctx.stroke();
                    
                    c.tiltAngle += c.tiltAngleIncrement;
                    c.y += (Math.cos(c.d) + 3 + c.r / 2) / 2;
                    c.tilt = Math.sin(c.tiltAngle) * 15;
                    
                    if (c.y > canvas.height) {
                        confetti[i] = {
                            ...c,
                            x: Math.random() * canvas.width,
                            y: -10,
                            tilt: Math.floor(Math.random() * 10) - 10
                        };
                    }
                });
            }
            
            let animationId;
            function animate() {
                draw();
                animationId = requestAnimationFrame(animate);
            }
            
            animate();
            
            // Stop confetti after 5 seconds
            setTimeout(() => {
                cancelAnimationFrame(animationId);
                ctx.clearRect(0, 0, canvas.width, canvas.height);
            }, 5000);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            loadProgress();
            startTimer();
            updateProgress();
        });

        // Handle window resize for confetti
        window.addEventListener('resize', () => {
            const canvas = document.getElementById('confetti-canvas');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });
    </script>
</body>
</html>
